@model ProfProPartage.ViewModel.ViewModelFicheCoursInvalideList
@{
    ViewData["Title"] = "Panneau d'administration";
}
<div class="titleTopPage">
    <h2><strong style="color:#E95325;">P</strong>anneau d'administration</h2>
    <h3>Gestion du site et du contenu</h3>
</div>
<ul class="nav nav-tabs">
    <li>@Html.ActionLink("Gestion des fiches invalides", "", "", new { data_toggle = "tab", href = "#FicheInvalide" })</li>
    <li>@Html.ActionLink("Gestion des news", "", "", new { data_toggle = "tab", href = "#GestionDesNews" })</li>
</ul>
<div class="tab-content">
    <div id="FicheInvalide" class="tab-pane active">
        <h3>Gestion des fiches en attentes de validation</h3>
        <div class="content-listFiche">
            <div class="col-md-12">
                <div id="Filter">
                    <div id="contentFilter">
                        <ul>
                            <li>
                                <button class="active btnP btnNiv btnMat" id="all">Show All</button>
                            </li>
                        </ul>
                        <ul>
                            <li>
                                <button class="btnP btnNiv" id="CP">CP</button>
                            </li>
                            <li>
                                <button class="btnP btnNiv" id="CE1">CE1</button>
                            </li>
                            <li>
                                <button class="btnP btnNiv" id="CE2">CE2</button>
                            </li>
                            <li>
                                <button class="btnP btnNiv" id="CM1">CM1</button>
                            </li>
                            <li>
                                <button class="btnP btnNiv" id="CM2">CM2</button>
                            </li>
                            <li>
                                <div class="subTitle">(Niveau)</div>
                            </li>
                        </ul>
                        <hr class="line" style="width: 70%; color: black; height: 1px; background-color:brown; opacity:0.6; margin-top:3px; margin-bottom:9px; display:none" />
                        <ul id="FilterMatiere"></ul>
                        <hr class="line" style="width: 70%; color: black; height: 1px; background-color:brown; opacity:0.6; margin-top:3px; margin-bottom:9px;display:none" />
                        <ul id="FilterTheme"></ul>
                    </div>
                </div>
                <div class="spacer"></div>
                <div id="parent">
                    @Html.Partial("listFicheInvalide", Model.ListFic)
                </div>
                <div class="spacer"></div>
                <div class="modal fade" id="PDFViewer" tabindex="-1" role="dialog" aria-labelledby="PDFViewerLabel" aria-hidden="true">
                    <div id="PDFDialog" class="modal-dialog">
                        <div id="PDFModal" class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="PDFViewerLabel">Modal title</h4>
                            </div>
                            <div class="modal-body">
                                <div id="wrap">
                                    <div id="left_div">
                                        <div id="IframePDF">
                                            <iframe frameborder="0"></iframe>
                                        </div>
                                    </div><div id="right_div">
                                        <div id="contentPDF"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="footerPDF">
                                <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="javascript: RefuserFicheInvalide();">Refuser</button>
                                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="javascript: ValiderFicheInvalide();">Valider</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </div>
        </div>
    </div>
    <div id="GestionDesNews" class="tab-pane">
        <h3>Gestion des news du site</h3>
        <div class="content-news">
            <div class="col-md-12">
                <br />
                <h3 style="text-align:center;">En cours de développement...</h3>
                <br />
            </div>
        </div>
    </div>
</div>

<script>
    function ValiderFicheInvalide() {
        var id = idF;
        $.ajax({
            url: '@Url.Action("ValiderFicheInvalide", "Admin")',
            type: 'POST',
            dataType: 'json',
            cache: false,
            data: { id: id },
            success: function (idR) {
                idf = null;
                $('*[idfiche="' + idR + '"]').remove();
            }
        });
    }

    function RefuserFicheInvalide() {
        var id = idF;
        $.ajax({
            url: '@Url.Action("RefuseerFicheInvalide", "Admin")',
            type: 'GET',
            dataType: 'json',
            cache: false,
            data: { id: id },
            success: function (idR) {
                idf = null;
                $('*[idfiche="' + idR + '"]').remove();
            }
        });
    }
</script>